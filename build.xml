<?xml version="1.0"?>
<project default="test" name="phpunit-expect">
  <target name="clean" description="Delete the generated files">
    <delete dir="build" quiet="true"/>
    <delete dir="doc/api" quiet="true"/>
    <delete dir="web" quiet="true"/>
    <delete includeEmptyDirs="true">
      <fileSet dir="var" includes="**/*" excludes=".gitkeep"/>
    </delete>
  </target>

  <target name="coverage" description="Upload the code coverage">
    <exec command="vendor/bin/coveralls var/coverage.xml" passthru="true"/>
  </target>

  <target name="doc" description="Build the documentation">
    <exec command="vendor/bin/phpdoc" passthru="true"/>
    <exec command="mkdocs build" passthru="true"/>
  </target>

  <target name="lint" description="Perform the static analysis">
    <phpLint>
      <fileSet dir="lib" includes="**/*.php"/>
      <fileSet dir="test" includes="**/*.php"/>
    </phpLint>
  </target>

  <target name="test" description="Run the tests">
    <exec command="vendor/bin/phpunit --colors=auto --verbose" passthru="true"/>
  </target>
</project>
